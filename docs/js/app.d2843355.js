(function(t){function e(e){for(var r,s,i=e[0],u=e[1],c=e[2],m=0,d=[];m<i.length;m++)s=i[m],o[s]&&d.push(o[s][0]),o[s]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(t[r]=u[r]);l&&l(e);while(d.length)d.shift()();return a.push.apply(a,c||[]),n()}function n(){for(var t,e=0;e<a.length;e++){for(var n=a[e],r=!0,i=1;i<n.length;i++){var u=n[i];0!==o[u]&&(r=!1)}r&&(a.splice(e--,1),t=s(s.s=n[0]))}return t}var r={},o={app:0},a=[];function s(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=t,s.c=r,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)s.d(n,r,function(e){return t[e]}.bind(null,r));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],u=i.push.bind(i);i.push=e,i=i.slice();for(var c=0;c<i.length;c++)e(i[c]);var l=u;a.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},1:function(t,e){},"3bd3":function(t,e,n){"use strict";var r=n("7024"),o=n.n(r);o.a},"56d7":function(t,e,n){"use strict";n.r(e);var r={};n.r(r),n.d(r,"getRoom",function(){return v}),n.d(r,"getState",function(){return b}),n.d(r,"getClients",function(){return _});var o={};n.r(o),n.d(o,"setMeName",function(){return h}),n.d(o,"setMuted",function(){return w}),n.d(o,"setPaused",function(){return g}),n.d(o,"addPeer",function(){return C}),n.d(o,"removePeer",function(){return j});n("cadf"),n("551c"),n("097d");var a=n("2b0e"),s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},i=[],u={name:"app"},c=u,l=(n("5c0b"),n("2877")),m=Object(l["a"])(c,s,i,!1,null,null,null);m.options.__file="App.vue";var d=m.exports,f=n("2f62"),p={room:"",state:{name:"",muted:!1,paused:!1},clients:[]},v=function(t){return t.room},b=function(t){return t.state},_=function(t){return t.clients},h=function(t,e){t.state.name=e},w=function(t,e){t.state.muted=e},g=function(t,e){t.state.paused=e},C=function(t,e){var n=e.video,r=e.peer;t.clients.push({video:n,peer:r})},j=function(t,e){t.clients=t.clients.filter(function(t){return t.peer.id!==e.id})};a["a"].use(f["a"]);var P=new f["a"].Store({state:p,mutations:o,getters:r}),y=(n("7f7f"),n("8c4f")),M=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"home"},[n("form",{staticClass:"join",attrs:{action:"#"},on:{submit:function(e){return e.preventDefault(),t.join(e)}}},[n("h1",[t._v("Start chating")]),n("label",{staticClass:"label",attrs:{for:"room"}},[t._v("Room ID")]),n("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.room,expression:"room",modifiers:{trim:!0}}],staticClass:"input",attrs:{type:"text",name:"room",id:"room",placeholder:"e.g. abc"},domProps:{value:t.room},on:{input:function(e){e.target.composing||(t.room=e.target.value.trim())},blur:function(e){t.$forceUpdate()}}}),n("label",{staticClass:"label",attrs:{for:"name"}},[t._v("Your name")]),n("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.name,expression:"name",modifiers:{trim:!0}}],staticClass:"input",attrs:{type:"text",name:"name",id:"name"},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value.trim())},blur:function(e){t.$forceUpdate()}}}),n("button",{staticClass:"button button--primary",attrs:{type:"submit"}},[t._v("Join")])])])},O=[],x=n("be94"),k=n("c64e"),S=n.n(k),$=n("e377"),E=n.n($),D={name:"home",data:function(){return{room:this.$route.query.room||S()(),name:""}},methods:Object(x["a"])({},Object(f["c"])({setMeName:"setMeName"}),{join:function(){this.setMeName(this.name),window.webrtc=new E.a({localVideoEl:"",remoteVideosEl:"",autoRequestMedia:!0,nick:this.name}),this.$router.push({name:"room",params:{room:this.room}})}})},N=D,R=(n("dbc2"),Object(l["a"])(N,M,O,!1,null,null,null));R.options.__file="Home.vue";var U=R.exports,q=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"room"},[n("div",{staticClass:"people",attrs:{id:"people"}},[n("div",{staticClass:"person"},[n("div",{staticClass:"person__video"},[n("video",{ref:"me",attrs:{src:""}})]),n("div",{staticClass:"person__name"},[t._v("\n\t\t\t\t"+t._s(t.state.name)+"\n\t\t\t")])]),t._l(t.clients,function(t){return n("Person",{key:t.peer.id,attrs:{client:t}})})],2),n("Controls")],1)},J=[],T=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"person"},[n("div",{ref:"person",staticClass:"person__video"}),n("div",{staticClass:"person__name"},[t._v("\n\t\t"+t._s(t.client.peer.nick)+"\n\t")])])},A=[],I={props:["client"],mounted:function(){this.$refs.person.appendChild(this.client.video)}},V=I,H=Object(l["a"])(V,T,A,!1,null,null,null);H.options.__file="Person.vue";var Y=H.exports,z=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",{staticClass:"controls"},[n("li",{staticClass:"controls__item"},[t.state.muted?n("a",{staticClass:"controls__link",attrs:{href:""},on:{click:function(e){return e.preventDefault(),t.unmuteMe(e)}}},[t._v("\n\t\t\tUnmute me\n\t\t")]):n("a",{staticClass:"controls__link",attrs:{href:""},on:{click:function(e){return e.preventDefault(),t.muteMe(e)}}},[t._v("\n\t\t\tMute me\n\t\t")])]),t.state.paused?n("li",{staticClass:"controls__item"},[n("a",{staticClass:"controls__link",attrs:{href:""},on:{click:function(e){return e.preventDefault(),t.unpauseMe(e)}}},[t._v("\n\t\t\tUnpause video\n\t\t")])]):n("li",{staticClass:"controls__item"},[n("a",{staticClass:"controls__link",attrs:{href:""},on:{click:function(e){return e.preventDefault(),t.pauseMe(e)}}},[t._v("Pause video")])])])},B=[],F={methods:Object(x["a"])({},Object(f["c"])({setMuted:"setMuted",setPaused:"setPaused"}),{muteMe:function(){window.webrtc.mute(),this.setMuted(!0)},pauseMe:function(){window.webrtc.pause(),this.setPaused(!0)},unmuteMe:function(){window.webrtc.unmute(),this.setMuted(!1)},unpauseMe:function(){window.webrtc.resume(),this.setPaused(!1),this.setMuted(!1)}}),computed:Object(x["a"])({},Object(f["b"])({state:"getState"}))},G=F,K=(n("3bd3"),Object(l["a"])(G,z,B,!1,null,null,null));K.options.__file="Controls.vue";var L=K.exports,Q={components:{Person:Y,Controls:L},props:{room:String},computed:Object(x["a"])({},Object(f["b"])({state:"getState",clients:"getClients"})),methods:Object(x["a"])({},Object(f["c"])({addPeer:"addPeer",removePeer:"removePeer"})),mounted:function(){var t=this;window.webrtc.joinRoom(this.room),window.webrtc.on("videoAdded",function(e,n){t.addPeer({video:e,peer:n})}),window.webrtc.on("videoRemoved",function(e,n){t.removePeer(n)}),window.webrtc.on("localStream",function(e){var r=n("5733");r(e,t.$refs.me,{autoplay:!0,mirror:!0,muted:!0})})}},W=Q,X=(n("be3b"),Object(l["a"])(W,q,J,!1,null,null,null));X.options.__file="Index.vue";var Z=X.exports;a["a"].use(y["a"]);var tt=new y["a"]({mode:"history",routes:[{path:"/",name:"home",component:U},{path:"/room/:room",name:"room",component:Z,props:!0,beforeEnter:function(t,e,n){P.getters.getState.name||n({name:"home",query:{room:t.params.room}}),n()}}]});a["a"].config.productionTip=!1,new a["a"]({router:tt,store:P,render:function(t){return t(d)}}).$mount("#app")},"5c0b":function(t,e,n){"use strict";var r=n("5e27"),o=n.n(r);o.a},"5e27":function(t,e,n){},"68c4":function(t,e,n){},7024:function(t,e,n){},be3b:function(t,e,n){"use strict";var r=n("68c4"),o=n.n(r);o.a},dbc2:function(t,e,n){"use strict";var r=n("ea59"),o=n.n(r);o.a},ea59:function(t,e,n){}});
//# sourceMappingURL=app.d2843355.js.map